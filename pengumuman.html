<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pengumuman SMAN 2 Cilacap</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <style>
      body {
        padding: 20px;
      }
      .search-results {
        margin-top: 20px;
      }
      #my-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="text-center mb-4">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQuFtbc9HaaYrYj17NuHC-tAaRQEp52GEZskQ&s" width="100px" alt="Logo" class="img-fluid" />  
      </div>
      <h4 class="text-center mb-0">Pengumuman xxx </h4>
      <h2 class="text-center mb-4">SMAN 2 Cilacap</h2> 
      <form id="searchForm" class="mb-4">
        <div class="mb-3">
          <label for="userId" class="form-label">Nomor Pendaftaran</label>
          <input
            type="text"
            class="form-control"
            id="userId"
            placeholder="" 
          />
        </div>
        <div class="mb-3">
          <label for="birthDate" class="form-label">Tanggal Lahir</label>
          <input type="date" class="form-control" id="birthDate" />
        </div>
        <button type="submit" class="btn btn-primary w-100">Cari</button>
      </form>
      <div class="search-results" id="searchResults">
      </div>
    </div> 
    <canvas id="my-canvas"></canvas>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
    <script>
      const users = [
        {
          id: "123456",
          birth_date: "2024-06-10", 
          name: "Alice",
          status: "pass",
        },
        {
          id: "123457",
          birth_date: "2024-06-10", 
          name: "Bob",
          status: "fail",
        },
        {
          id: "user3",
          birth_date: "2000-08-22",
          name: "Charlie",
          status: "pass",
        },
      ];

      const confettiSettings = { target: 'my-canvas', max: 100, size: 1.2, animate: true };
const confetti = new ConfettiGenerator(confettiSettings);

function fadeOut(element, duration) {
  let opacity = 1;
  const interval = 50;
  const decrement = interval / duration;

  const fade = setInterval(() => {
    if (opacity <= 0) {
      clearInterval(fade);
      element.style.display = 'none';
    } else {
      opacity -= decrement;
      element.style.opacity = opacity;
    }
  }, interval);
}

function stopConfetti() {
  const confettiCanvas = document.getElementById('my-canvas');
  setTimeout(() => {
    fadeOut(confettiCanvas, 3000); // Fade out over 3 seconds
  }, 3000);
} 


      function searchUsers(event) {
        event.preventDefault();

        const userId = document.getElementById("userId").value;
        const birthDate = document.getElementById("birthDate").value;
        const resultsContainer = document.getElementById("searchResults");

        resultsContainer.innerHTML = "";

        const filteredUsers = users.filter(
          (user) => user.id === userId && user.birth_date === birthDate
        );

        if (filteredUsers.length > 0) {
          filteredUsers.forEach((user) => {
            if (user.status === "pass") {
              confetti.render();
              stopConfetti();  
              const userTable = document.createElement("table");
              userTable.className = "table table-bordered";
              userTable.innerHTML = `
                <thead>
                  <tr>
                    <th colspan="3" class="h2 text-success text-center">LULUS</th> 
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Name</td>
                    <td>:</td>
                    <td>${user.name}</td>
                  </tr>
                  <tr>
                    <td>Birth Date</td>
                    <td>:</td>
                    <td>${user.birth_date}</td>
                  </tr>
                </tbody>
              `;
              resultsContainer.appendChild(userTable);
            } else {
              const userTable = document.createElement("table");
              userTable.className = "table table-bordered";
              userTable.innerHTML = `
                <thead>
                  <tr>
                    <th colspan="3" class="h2 text-danger text-center">TIDAK LULUS</th> 
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Name</td>
                    <td>:</td>
                    <td>${user.name}</td>
                  </tr>
                  <tr>
                    <td>Birth Date</td>
                    <td>:</td>
                    <td>${user.birth_date}</td>
                  </tr>
                </tbody>
              `;
              resultsContainer.appendChild(userTable);
            }
          });
        } else {
          resultsContainer.innerHTML =
            "<p class='text-danger'>No users found.</p>";
        }  
      }

      document
        .getElementById("searchForm")
        .addEventListener("submit", searchUsers);
    </script>
  </body>
</html>
